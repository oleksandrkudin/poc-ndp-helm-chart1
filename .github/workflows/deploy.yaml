name: deploy

on:
  workflow_dispatch:
    inputs:
      release_version:
        type: string
        required: true
      environment:
        type: string
        required: true
      next_environment:
        type: string
        required: true

# Looks like not necessary. Issue was in repository settings.        
# permissions:
#   contents: read
#   id-token: write

jobs:
  deploy:
    secrets: inherit
    uses: oleksandrkudin/poc-ndp-workflows/.github/workflows/deploy.yaml@main
    with:
      # TODO: can be change with github.repository
      unit: "poc-ndp-helm-chart1"
      release_version: ${{ inputs.release_version }}
      environment: ${{ inputs.environment }}
      next_environment: ${{ inputs.next_environment }}
